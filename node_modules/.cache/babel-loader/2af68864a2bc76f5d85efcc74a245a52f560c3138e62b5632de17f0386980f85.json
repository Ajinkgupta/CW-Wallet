{"ast":null,"code":"import _slicedToArray from\"/workspace/Cryptway-ETH-Wallet/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ethers}from'ethers';import React,{useCallback,useEffect,useState}from'react';import{sepolia}from'../models/Chain';import{TransactionService}from'../services/TransactionService';import{shortenAddress}from'../utils/AccountUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AccountTransactions=function AccountTransactions(_ref){var account=_ref.account;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];var _useState3=useState({status:null,message:''}),_useState4=_slicedToArray(_useState3,2),networkResponse=_useState4[0],setNetworkResponse=_useState4[1];var getTransactions=useCallback(function(limit){setNetworkResponse({status:'pending',message:''});TransactionService.getTransactions(account.address,limit).then(function(response){setTransactions(response.data.result);}).catch(function(error){console.log({error:error});setNetworkResponse({status:'error',message:JSON.stringify(error)});}).finally(function(){setNetworkResponse({status:'complete',message:''});});},[account.address]);useEffect(function(){getTransactions(10);},[getTransactions]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex justify-start   items-center flex-col   p-5 z-40 \",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#2D2F36] mt-20   w-max-full     sm:w-[30rem]   md:w-[32rem] rounded-3xl p-4 content-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"AccountTransactions\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Transactions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"TransactionsMetaData text-sm mb-4\",children:[networkResponse.status===\"complete\"&&transactions.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No transactions found for this address\"}),networkResponse.status&&/*#__PURE__*/_jsxs(_Fragment,{children:[networkResponse.status===\"pending\"&&/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600\",children:\"Loading transactions...\"}),networkResponse.status===\"error\"&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600\",children:[\"Error occurred while transferring tokens: \",networkResponse.message]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full table-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200 text-gray-700 uppercase text-xs font-bold\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Hash\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"From\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"To\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Value\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Timestamp\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-sm font-medium\",children:transactions.map(function(transaction){return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2\",children:/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(sepolia.blockExplorerUrl,\"/tx/\").concat(transaction.hash),target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-purple-600 hover:underline\",children:shortenAddress(transaction.hash)})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(sepolia.blockExplorerUrl,\"/address/\").concat(transaction.from_address),target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-purple-600 hover:underline\",children:shortenAddress(transaction.from_address)}),transaction.from_address.toLowerCase()===account.address.toLowerCase()?/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-500 text-white\",children:\"OUT\"}):/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-500 text-white\",children:\"IN\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2\",children:/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(sepolia.blockExplorerUrl,\"/address/\").concat(transaction.to_address),target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-purple-600 hover:underline\",children:shortenAddress(transaction.to_address)})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2\",children:[ethers.utils.formatEther(transaction.value),\" ETH\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2\",children:new Date(transaction.block_timestamp).toLocaleString()})]},transaction.hash);})})]})})]})})});};export default AccountTransactions;","map":{"version":3,"names":["ethers","React","useCallback","useEffect","useState","sepolia","TransactionService","shortenAddress","AccountTransactions","account","transactions","setTransactions","status","message","networkResponse","setNetworkResponse","getTransactions","limit","address","then","response","data","result","catch","error","console","log","JSON","stringify","finally","length","map","transaction","blockExplorerUrl","hash","from_address","toLowerCase","to_address","utils","formatEther","value","Date","block_timestamp","toLocaleString"],"sources":["/workspace/Cryptway-ETH-Wallet/src/pages/AccountTransactions.tsx"],"sourcesContent":["import { ethers } from 'ethers';\nimport React, { useCallback, useEffect, useState ,useRef } from 'react';\nimport { Account } from '../models/Account';\nimport { sepolia } from '../models/Chain';\nimport { Transaction } from '../models/Transaction';\nimport { TransactionService } from '../services/TransactionService';\nimport { shortenAddress } from '../utils/AccountUtils'; \n\ntype AccountTransactionsProps = {\n  account: Account,\n};\n\n\nconst AccountTransactions: React.FC<AccountTransactionsProps> = ({ account }) => {\n  const [transactions, setTransactions] = useState<Transaction[]>([]); \n\n  const [networkResponse, setNetworkResponse] = useState<{ status: null | 'pending' | 'complete' | 'error', message: string | React.ReactElement }>({\n    status: null,\n    message: '',\n  });\n\n\n  const getTransactions = useCallback(\n    (limit: number) => {\n      setNetworkResponse({\n        status: 'pending',\n        message: '',\n      });\n      TransactionService.getTransactions(account.address, limit).then(response => {\n        setTransactions(response.data.result);\n      }).catch(error => {\n        console.log({error})\n        setNetworkResponse({\n          status: 'error',\n          message: JSON.stringify(error),\n        });\n      }).finally(()=>{\n        setNetworkResponse({\n          status: 'complete',\n          message: '',\n        });\n      });\n    },[account.address]\n  );\n\n  \nuseEffect(() => {\n  getTransactions(10);\n}, [getTransactions]);\n \n\n  return (\n    <div className=\"flex-1 flex justify-start   items-center flex-col   p-5 z-40 \">\n     \n    <div className=\"bg-[#2D2F36] mt-20   w-max-full     sm:w-[30rem]   md:w-[32rem] rounded-3xl p-4 content-box\">\n           \n    <div className=\"AccountTransactions\">\n     \n\n  <h2 className=\"text-2xl font-bold mb-4\">Transactions</h2>\n  <div className=\"TransactionsMetaData text-sm mb-4\">\n    {networkResponse.status === \"complete\" && transactions.length === 0 && (\n      <p>No transactions found for this address</p>\n    )}\n    {networkResponse.status && (\n      <>\n        {networkResponse.status === \"pending\" && (\n          <p className=\"text-purple-600\">Loading transactions...</p>\n        )}\n        {networkResponse.status === \"error\" && (\n          <p className=\"text-red-600\">\n            Error occurred while transferring tokens: {networkResponse.message}\n          </p>\n        )}\n      </>\n    )}\n  </div>\n  <div className=\"overflow-x-auto\">\n    <table className=\"w-full table-auto\">\n      <thead>\n        <tr className=\"bg-gray-200 text-gray-700 uppercase text-xs font-bold\">\n          <th className=\"px-4 py-2\">Hash</th>\n          <th className=\"px-4 py-2\">From</th>\n          <th className=\"px-4 py-2\">To</th>\n          <th className=\"px-4 py-2\">Value</th>\n          <th className=\"px-4 py-2\">Timestamp</th>\n        </tr>\n      </thead>\n      <tbody className=\"text-sm font-medium\">\n        {transactions.map(transaction => (\n          <tr key={transaction.hash} className=\"border-b border-gray-200\">\n            <td className=\"px-4 py-2\">\n              <a\n                href={`${sepolia.blockExplorerUrl}/tx/${transaction.hash}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-purple-600 hover:underline\"\n              >\n                {shortenAddress(transaction.hash)}\n              </a>\n            </td>\n            <td className=\"px-4 py-2\">\n              <a\n                href={`${sepolia.blockExplorerUrl}/address/${transaction.from_address}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-purple-600 hover:underline\"\n              >\n                {shortenAddress(transaction.from_address)}\n              </a>\n              {transaction.from_address.toLowerCase() === account.address.toLowerCase() ? \n                <span className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-500 text-white\">OUT</span>\n                :\n                <span className=\"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-500 text-white\">IN</span>\n              }\n            </td>\n            <td className=\"px-4 py-2\">\n              <a\n                href={`${sepolia.blockExplorerUrl}/address/${transaction.to_address}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-purple-600 hover:underline\"\n              >\n                {shortenAddress(transaction.to_address)}\n              </a>\n            </td>\n            <td className=\"px-4 py-2\">\n              {ethers.utils.formatEther(transaction.value)} ETH\n            </td>\n            <td className=\"px-4 py-2\">\n              {new Date(transaction.block_timestamp).toLocaleString()}\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  </div>\n</div>\n\n           \n          </div>\n      </div>\n  );\n};\n\nexport default AccountTransactions;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}